# task05
Пятый таск

### Известные недостатки
- К сожалению, у меня не получилось придумать sql-запрос так, чтобы я получал объявления и все фото сразу. Хотел сделать нормализованную бд, а в итоге сам себе усложнил жизнь.

### Примечания по коду (принятые решения)
- Исходя из деталей задания создаю структуру объявления.
- В качестве драйвера для работы с бд хотел взять [pq](github.com/lib/pq), но в статусе репозитория рекомендовали использовать [pgx](https://github.com/jackc/pgx).
- Два докер контейнера. Приложение работает в одном. База в другом. Вопрос - один Dockerfile или два? По сути можно было и один, используя multi-stage building и target. Но тогда при любой ошибке в докерфайле, даже если не при формировании image выбранного контейнера (а другого). Поэтому решил отделить докерфайлы. app в корне, pg (база данных) в папке db, вместе со скриптом инициализации.
- Я не знаю как правильно работать с nullable полями и json (см. model/ad.go - description). Почитал, что можно использовать gopkg.in/guregu/null.v4 , но почему-то тэг json:omitempty не работает. Поэтому просто использовал указатель на строку.

### Структура объявления
- ID
- Название объявления
- Дата создания
- Цена
- Ссылка на главное фото
- Ссылки на все фото - (опционально)
- Описание - (опционально)

### Методы
- Получение списка объявлений
- Получение одного объявления
- Создание объявления

### Для запуска
- Linux (тестировал на Mint 20.0 x64);
- Билд приложения и запуск приложения:
```sh
make build
./task05
```
- Билд и запуск приложения одной командой:
```sh
make start
```
- Запуск приложения одной командой:
```sh
make run
```
- Очистка проекта:
```sh
make clean
```